

#include <iostream>
using namespace std;

class Subject{
public:
  virtual ~Subject(){
  }
  virtual void Request()=0;
};

class RealSubject : public Subject{@//¹ê»Úªºª«¥ó
  string s;
public:
  RealSubject(const char* msg){
    s=msg;
  }
  virtual ~RealSubject(){
  }
  void Request(){
    cout << s << endl;
  }
};

class Proxy : public Subject{@	//¥N²zª«¥ó
  string s;
  RealSubject* rs;
public:
  Proxy(const char* msg){
    rs=0;
    s=msg;
  }

  virtual ~Proxy(){
    delete rs;
  }
  void Request(){
    if(rs==0){
      rs=new RealSubject(s.c_str());@	//¨ì³o­Ó®É¶¡ÂI¤~¶}©l»s§@
    }
    rs->Request();
  }
};

int main(void)
{
  Subject* aSubject=new Proxy("Message");
  aSubject->Request();
  aSubject->Request();

  delete aSubject;
}